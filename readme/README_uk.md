### Пакет для роботи з логами та інтеграцією в Blender

Цей пакет Python призначений для спрощення процесу роботи з логами як у звичайних Python додатках, так і при розробці аддонів для Blender. Він забезпечує розширені можливості роботи з логами, такі як автоматичне керування файлами логів, кольоровий вивід у консоль, а також спеціалізований API для плавної інтеграції з процесами виконання операторів Blender. Незалежно від того, чи розробляєте ви для Blender або для загальних проектів на Python, цей пакет забезпечує ефективний, структурований і легкий у читанні спосіб ведення логів.

#### Основні функції:

1. **Одночасне ведення логів у консоль і файли:**
   Пакет надає можливість записувати повідомлення як у консоль, так і у файли логів одночасно. Логи в консолі кольорові відповідно до рівня серйозності для зручнішого перегляду, тоді як детальні логи зберігаються у файли для подальшого аналізу.

   - **Кольоровий вивід у консоль:**
     Логи кодуються кольором залежно від рівня (INFO, WARNING, ERROR), що полегшує розрізнення повідомлень на перший погляд. Це покращує процес налагодження, забезпечуючи візуальну ясність.
   
   - **Налаштування рівня логування:**
     Пакет дозволяє розробникам контролювати, який рівень логів відображається в консолі, тоді як усі рівні зберігаються у файли логів. Це дозволяє вам зосередитись на певних повідомленнях у режимі реального часу, зберігаючи повну історію логів для подальшого аналізу.

2. **Ротація файлів логів та очищення:**
   Пакет автоматично видаляє старі файли логів, забезпечуючи керованість каталогу логів з часом.

   - **Автоматичне видалення логів:**
     Під час створення нового файлу логу старі логи видаляються відповідно до налаштованої політики збереження. Ви можете налаштувати кількість логів, що зберігаються, запобігаючи накопиченню зайвих файлів і зберігаючи місце на диску.

   Приклад:
   ```python
   import bhqrprt
   logs_directory = os.path.join(os.path.dirname(__file__), "logs")
   bhqrprt.purge_old_logs(directory=logs_directory, max_num_logs=30)
   bhqrprt.setup_logger(directory=logs_directory)
   log = logging.getLogger(name=__name__)
   ```

   У цьому прикладі старі логи автоматично видаляються, залишаючи тільки останні 30 файлів.

3. **Інтеграція з аддонами Blender:**
   Пакет надає спеціалізований API для розробників аддонів для Blender, що допомагає відстежувати виконання операторів, логувати налаштування та повідомляти одночасно в UI і файли логів.

   - **Логування виконання операторів:**
     Відстежуйте час початку та завершення виконання операторів Blender та автоматично логуйте ці події. Це особливо корисно, коли важливо стежити за продуктивністю або коли необхідно мати чіткий запис про виконання операцій у Blender.

   - **Логування налаштувань і властивостей сцени:**
     Пакет дозволяє розробникам легко логувати налаштування Blender і властивості сцени, що є цінним під час налагодження або обміну інформацією про поточний стан середовища Blender.

     Приклад:
     ```python
     log.debug("Завантажено з налаштуваннями:")
     log.debug("Преференції:")
     bhqrprt.log_settings(log, item=addon_pref)
     
     log.debug("Сцена:")
     scene: Scene = context.scene
     scene_props: SceneProps = scene.cpp
     bhqrprt.log_settings(log, item=scene_props)
     ```

     У цьому прикладі логуються як налаштування аддону, так і властивості сцени, що надає інформацію про поточну конфігурацію Blender.

   - **Об'єднане логування та звітування:**
     Оператори Blender часто повідомляють користувачеві через `self.report`. За допомогою цього пакету ви можете одночасно логувати ці повідомлення у файли логів та відображати їх у інтерфейсі користувача, забезпечуючи фіксацію як повідомлень для користувача, так і внутрішніх логів.

     Приклад:
     ```python
     bhqrprt.report_and_log(
         log,
         self,
         level=logging.WARNING,
         message="Відсутня активна UV-карта, продовження з обмеженими можливостями",
         msgctxt=msgctxt,
     )
     ```

     У цьому випадку повідомлення одночасно відображається у UI Blender та записується до файлів логів, забезпечуючи чіткий запис того, що побачив користувач, і що було зафіксовано внутрішньо.

4. **Легка інтеграція з кодом аддону:**
   API розроблено легким і простим для інтеграції в існуючі аддони Blender, дозволяючи розробникам поліпшити логування без кардинальних змін у коді. Ви можете інтегрувати його у класи операторів для логування ключової інформації, як-от налаштування та статуси виконання.

---

#### Технічний огляд:

- **Рівні логування:**
   Пакет підтримує всі стандартні рівні логування (DEBUG, INFO, WARNING, ERROR і CRITICAL), надаючи розробникам детальний контроль над тим, що логувати. Ви можете легко налаштувати консоль для відображення повідомлень лише певного рівня, зберігаючи повну історію у файлах логів.

- **Ротація файлів і політики збереження:**
   Файли логів автоматично обертаються залежно від кількості файлів для збереження. Це забезпечує, що логи не накопичуються нескінченно, і старі, менш актуальні логи видаляються автоматично.

- **Кольорові логи в консолі:**
   Пакет використовує ANSI escape коди для кольорового відображення повідомлень у консолі. Кожен рівень логів має свій колір, що полегшує візуальне розпізнавання важливих повідомлень.

- **Логування для Blender:**
   API для аддонів Blender розроблено спеціально для роботи з особливими потребами розробників, такими як логування часу виконання операторів і звітів у UI Blender. Ця інтеграція забезпечує комплексне логування для унікальних робочих процесів Blender.

---

#### Приклади використання:

**Налаштування логування:**

```python
import bhqrprt

logs_directory = os.path.join(os.path.dirname(__file__), "logs")
bhqrprt.purge_old_logs(directory=logs_directory, max_num_logs=30)
bhqrprt.setup_logger(directory=logs_directory)
log = logging.getLogger(name=__name__)

log.info("Логування ініціалізоване.")
```

**Логування налаштувань у аддонах Blender:**

```python
log.debug("Завантажено з налаштуваннями:")
log.debug("Преференції:")
bhqrprt.log_settings(log, item=addon_pref)
log.debug("Сцена:")
scene: Scene = context.scene
scene_props: SceneProps = scene.cpp
bhqrprt.log_settings(log, item=scene_props)
```

**Об'єднане логування та звітування у аддонах Blender:**

```python
bhqrprt.report_and_log(
    log,
    self,
    level=logging.WARNING,
    message="Відсутня активна UV-карта, продовження з обмеженими можливостями",
    msgctxt=msgctxt,
)
```

Цей пакет забезпечує потужну й ефективну систему логування, розроблену для загальних проектів на Python і для розробки аддонів Blender. Він спрощує процеси логування, забезпечує ефективне управління логами та надає глибоку інтеграцію з операторською системою Blender. Використовуючи цей пакет, ви можете оптимізувати свій процес логування, покращити можливості налагодження та підвищити ефективність своїх аддонів для Blender за допомогою кращого відстеження та звітності.
